clear;
clc;
A1 = [-0.989992 -0.141120 0 0;
       0.141120 -0.989992 0  0;
       0 0 1 0;
       0 0 0 1];
B1 = [-0.989992 -0.138307 0.028036 -26.9559;
0.138307 -0.911449 0.387470 -96.1332;
-0.028036 0.387470 0.921456 19.4872;
0 0 0 1];

A2 = [0.07073 0.000000 0.997495 -400.000;
0.000000 1.000000 0.000000 0.000000;
-0.997495 0.000000 0.070737 400.000;
0 0 0 1];

B2 = [0.070737 0.198172 0.997612 -309.543;
-0.198172 0.963323 -0.180936 59.0244;
-0.977612 -0.180936 0.107415 291.177;
0 0 0 1];
 
RA1 = A1(1:3,1:3);
PA1 = A1(1:3,4);
RB1 = B1(1:3,1:3);
PB1 = B1(1:3,4);
RA2 = A2(1:3,1:3);
PA2 = A2(1:3,4);
RB2 = B2(1:3,1:3);
PB2 = B2(1:3,4);

[phia1,alpha1] = logR(RA1);
[phib1,beta1] = logR(RB1);

[phia2,alpha2] = logR(RA2);
[phib2,beta2] = logR(RB2);

A = [alpha1 alpha2 cross(alpha1,alpha2)];
B = [beta1 beta2 cross(beta1,beta2)];
 
Rx = A*inv(B);
AA = [RA1 - eye(3);RA2 - eye(3)];
BB = [Rx*PB1 - PA1;Rx*PB2 - PA2];

Px = inv(AA'*AA)*AA'*BB




